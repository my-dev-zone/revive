<div class="main_page_container">

	<div class="container-fluid container_section">
	
		<div class="row">
		
			<div class="col-xs-12">
			
				<div class="row">
					
					<div class="panel panel-default">
						<div class="panel-heading panel_blue_heading panel_glyph_container">
							
							<div class="header_glyph">
								<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
							</div>
							<div class="header_text">
								<p>Found Avalible Domains</p>
							</div>
							
						</div>
						<div class="panel-body">

              <%= form_tag sites_path, method: :get, id: 'filter-sites' do %>
                <p>DA range</p>
                <%= text_field_tag :da_range, nil, id: 'da-range' %>
                <p>TF range</p>
                <%= text_field_tag :tf_range, nil, id: 'tf-range' %>
                <%= hidden_field_tag :user_id, params['user_id'] %>
                <%= submit_tag 'Filter' %>
              <% end %>

							<table class="table table-hover table-striped">
								
								<thead>
									<tr>
										<th>DOMAIN</th>
										<th class="col-xs-1">											
											<%= link_to 'DA', sites_path('user_id' => params['user_id'], sort: '2', da_range: @da_range_str, tf_range: @tf_range_str) %>
										</th>
										<th class="col-xs-1">
											<%= link_to 'PA', sites_path('user_id' => params['user_id'], sort: '3', da_range: @da_range_str, tf_range: @tf_range_str) %>
										</th>
										<th class="col-xs-1">
											<%= link_to 'TF', sites_path('user_id' => params['user_id'], sort: '4', da_range: @da_range_str, tf_range: @tf_range_str) %>
										</th>
										<th class="col-xs-1">
											<%= link_to 'CF', sites_path('user_id' => params['user_id'], sort: '5', da_range: @da_range_str, tf_range: @tf_range_str) %>
										</th>
										<th class="col-xs-1">TF/CF</th>
										<th class="col-xs-1">
											<%= link_to 'RF', sites_path('user_id' => params['user_id'], sort: '6', da_range: @da_range_str, tf_range: @tf_range_str) %>
										</th>
										<th class="col-xs-1">
											<%= link_to 'BL', sites_path('user_id' => params['user_id'], sort: '7', da_range: @da_range_str, tf_range: @tf_range_str) %>
										</th>
										<!-- <th>FOUND ON</th> -->
									</tr>
								</thead>
								
								<tbody>
									<% @domains.each do |i| %>
										<tr>
											<td>
												<%= link_to copy_to_clipboard_path(msg: "http://#{i[1]}"), class: 'copy_to_clipboard_button has-tooltip', data: {'toggle' => 'tooltip', 'placement' => 'top'}, title: "Copy To Clipboard", remote: true do %>
												    <i class="glyphicon glyphicon-list-alt">
														<span class="glyph_text"><%= "www.#{i[1]}" %></span>
													</i>
												<% end %>
											</td>
											<!-- <td><%#= link_to "www.#{i.simple_url}", "http://#{i.simple_url}" %></td> -->
											<td><%= number_with_precision(i[2], precision: 0) %></td>
											<td><%= number_with_precision(i[3], precision: 0) %></td>
											<td><%= i[4] %></td>
											<td><%= i[5] %></td>
											<td><%= number_with_precision(i[4].to_f/i[5].to_f) %></td>
											<td><%= i[6] %></td>
											<td><%= i[7] %></td>
											<!-- <td><%#= link_to i.found_on, i.found_on %></td> -->
										</tr>
									<% end %>
								</tbody>
								
							</table>

							<div class="will_paginate_container text-center">
								<%= will_paginate @domains, renderer: BootstrapPagination::Rails %>
							</div>
							
						</div>
						
					</div>

					
				</div>
			
			</div>
		
		</div>
	
	</div>

</div>
<script type='text/javascript'>
    var daMin = '<%= @da_range_obj.min %>';
    var daMax = '<%= @da_range_obj.max %>';
    var tfMin = '<%= @tf_range_obj.min %>';
    var tfMax = '<%= @tf_range_obj.max %>';
    console.log(daMin)
    $(document).ready(function(){
        $('form#filter-sites input#da-range').ionRangeSlider({
          type: 'double',
          grid: true,
          min: 0,
          max: 100,
          from: daMin,
          to: daMax
        });
        $('form#filter-sites input#tf-range').ionRangeSlider({
          type: 'double',
          grid: true,
          min: 0,
          max: 100,
          from: tfMin,
          to: tfMax
        });
    })
</script>
